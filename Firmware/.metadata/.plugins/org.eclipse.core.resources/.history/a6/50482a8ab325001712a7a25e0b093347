#ifndef FSM__HPP
#define FSM__HPP

#include "Idle.hpp"
#include "Measure.hpp"
#include "Sleep.hpp"
#include "Config.hpp"
#include "State.hpp"

class FSM {
	// Operations
	FSM(){

	}


	// Attributes
public :
	/// flag set when a new char is receive by the microcontroller
	bool flag_UART0_rx_char = 0;
	/// set when the timerX overflow (stop frequencies measurement)
	/// todo select timer
	bool flag_freq_data_ready = 0;
	/// set when time come for a new measure
	bool flag_new_measure = 0;
	/// set when each averages are calculated and ready for the OUTPUT state
	bool flag_data_averages_ready = 0;

	// Attributes
	static unsigned long int timestamp;

private :
	Idle idle;
	Config config;
	Measure measure;
	Output output;
	Sleep sleep;
	State &nextState = idle;
};

#endif
